<!DOCTYPE html>
<html>
<head>
    <title>IAS POS API: Getting Started</title>
    <link rel="icon" type="image/png" href="images/favicon-32x32-png" sizes="32x32" />
    <link rel="icon" type="image/png" href="images/favicon-16x16-png" sizes="16x16" />
    <link href='css/typography-css' media='screen' rel='stylesheet' type='text/css' />
    <link href='css/reset-css' media='screen' rel='stylesheet' type='text/css' />
    <link href='css/screen-css' media='screen' rel='stylesheet' type='text/css' />
    <link href='css/reset-css' media='print' rel='stylesheet' type='text/css' />
    <link href='css/print-css' media='print' rel='stylesheet' type='text/css' />
    <link href='custom.css' media='screen' rel='stylesheet' type='text/css'/>
    <link href='ext/POS-API-Web-docs-custom-css' media='screen' rel='stylesheet' type='text/css' />
    <script src='lib/jquery-1-8-0-min-js' type='text/javascript'></script>
    <script src='lib/jquery-slideto-min-js' type='text/javascript'></script>
    <script src='lib/jquery-wiggle-min-js' type='text/javascript'></script>
    <script src='lib/jquery-ba-bbq-min-js' type='text/javascript'></script>
    <script src='lib/handlebars-2-0-0-js' type='text/javascript'></script>
    <script src='lib/underscore-min-js' type='text/javascript'></script>
    <script src='lib/backbone-min-js' type='text/javascript'></script>
    <script src='swagger-ui-min-js' type='text/javascript'></script>
    <script src='lib/highlight-7-3-pack-js' type='text/javascript'></script>
    <script src='lib/jsoneditor-min-js' type='text/javascript'></script>
    <script src='lib/marked-js' type='text/javascript'></script>
    <script src='lib/swagger-oauth-js' type='text/javascript'></script>

    <style type="text/css">
        h2 {
            padding: 20px 0 !important;    
        }
    </style>

</head>

<body class="swagger-section">
    <header>
        <nav class="global">
            <div class="wrapper">
                <ul>
                    <li class="home">
                        <a href="/pos/docs/starting" class="active">
                            <p style="color: white;">Getting Started</p>
                        </a>
                        <a href="/pos/docs/index">
                            <p style="color: white;">API Docs</p>
                        </a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>
    <div class="main">
        <div class="wrapper white-box">
            <div class="swagger-ui-wrap">
                <div class="info">
                    <div class="info_title">Getting Started with IAS POS API</div>
                    <div class="info_description">
                        <p>
                            IAS POS API is an HTTP service exposing REST resources over standard HTTP methods.
                            This getting started guide will give you an introduction of what the API supports.
                        </p>
                    </div>
                    <h2>A Word About Swagger</h2>
                    <p>
                        IAS POS API exposes a Swagger definition file that you can use to speed up integration.
                        There are lots of tools available, most free, that would allow you to do things like generating clients libraries, test suites, etc.
                        For example, the popular Chrome extension, Postman, allows you to import a Swagger definition file which generates sample requests against all available resources.
                        Our Swagger endpoint is listed in our <a href="/docs/index">API Docs</a>.
                        To learn more about Swagger, visit: <a href="http://swagger.io/">http://swagger.io</a>
                    </p>
                    <h2>Vendor API Key</h2>
                    <p>
                        Clients are required to have a Vendor API Key. Please, contact IAS to get one.
                        API keys are passed as part of the following HTTP header: <b>X-IAS-APIKEY</b>
                    </p>
                    <pre><span>Host: "sso.qpay123.biz"</span>
<span>X-IAS-APIKEY: "JHgjkghKJUHJgkjhbghgh"</span></pre>
                    <h2>Authentication and Authorization</h2>
                    <p>
                        IAS POS API requires clients to authenticate against our Single Sign On (SSO) endpoint.
                        This endpoint requires clients to have valid credentials and a valid client certificate.
                        There are two supported scenarios depending on the POS setup clients have. Gateway or Wholesaler.
                    </p>
                    <h3>Wholesalers</h3>
                    <p>
                        Wholesaler is basically a server to server setup. POS Vendors would have a server interacting with our SSO solution,
                        not a user with a browser. The server then would serve as a proxy between the POS software and our IAS POS API.
                        The whole process of authenticating consist of the server programatically sending a POST request to our SSO API passing along
                        the given IAS certificate and Vendor API key. We have a wholesaler SSO endpoint per environment.
                        TEST: <b> https://sso.qpay123.biz/api/authtoken </b> PROD: <b> https://sso.qpay123.com/api/authtoken </b>
                    </p>
                    <p>
                        Here is a sample code written in C# that interacts with our SSO TEST endpoint to retrieve the Token.
                        This function assumes that the cert is installed on the server. By specifying ClientCertificateOption.Automatic the runtime
                        would take care of sending the cert as part of the request.
                    </p>
                    <pre>
private string GetToken()
{
	string sso = "https://sso.qpay123.biz/api/authtoken";
	string apiKey = "HySR8SJmVXgqiazDiuiu77";
	
	var handler = new HttpClientHandler();
	handler.ClientCertificateOptions = ClientCertificateOption.Automatic;
	
	var client = new HttpClient(handler);
	var request = new HttpRequestMessage() 
	{
    	RequestUri = new Uri(sso),
        Method = HttpMethod.Post											
    };
	request.Headers.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
	request.Headers.Add("X-IAS-APIKEY", apiKey);
	
	var response = client.SendAsync(request).Result;
	return response.Content.ReadAsStringAsync().Result;
}
</pre>
                    <h3>Gateway</h3>
                    <p>
                        We define Gateways as POS clients that call us directly from its customer's computers.
                        In this setup, the IAS certificate is installed in the client computers and POS software
                        would show a browser to the user pointing it to our SSO gateway endpoint.
                        The browser would request the IAS cert from the user automatically and they would be presented with our
                        login form. Browsers should make a GET request to (TEST) http://api.incommagentsolutions.biz/Authenticate/Auth or
                        (PROD) http://api.incommagentsolutions.com/Authenticate/Auth. You can optionally pass a url you want to be redirected to
                        with a TOKEN after the handshake is over: http://api.incommagentsolutions.biz/Authenticate/Auth?ReturnUrl=http://myurl.com/api.php
                    </p>
                    <h2>The Token</h2>
                    <p>
                        Once you have a valid Token, you can start consuming IAS POS API by passing it
                         along with the standard Authorization header, using <strong>IAS-TOKEN</strong> as the scheme like this:
                    </p>
                    <pre>Authorization: IAS-TOKEN MTctNTctMDAtNzAtOGItY2YtMTAtNDU6OWZiNDdiNWMtNDc4Ny00OTFiLWI0YTktMTFkY</pre>
                    
                    <h2>Errors</h2>
                    <p>
                        IAS POS API issues very standard HTTP errors for common errors. Each operation documents the specific errors they return.
                        Below are the most common errors used across the API.
                    </p>

                    <table id="table-2">
                        <tr>
                            <th style="width: 150px">Status Code</th>
                            <th>Meaning</th>
                        </tr>
                        <tr>
                            <td>400</td>
                            <td>
                                Bad Request. The parameters passed are invalid or there was an error on the operation.
                                It will always be accompanied by the error message that would describe in detail what the error was.
                            </td>
                        </tr>
                        <tr>
                            <td>401</td>
                            <td>Unauthorized. You either didn't pass a token or the token is invalid.</td>
                        </tr>
                        <tr>
                            <td>404</td>
                            <td>Not Found. The store cannot sell this brand/product.</td>
                        </tr>
                        <tr>
                            <td>500</td>
                            <td>Internal Server Error. We had a problem with our server. Try again later.</td>
                        </tr>
                    </table>

                    <h2>Our API Documentation</h2>
                    <p>
                        IAS POS API is documented in more details in our <a href="/docs/index">API Docs</a>. You can also test our resources by entering a valid token and the required parameters if any.
                        Every resource also documents the type of errors you can expect to receive as well as the meaning of every parameter.
                        We hope that this style would be very productive to all clients as it has been productive for us. Get in touch with us if you encounter any issues.
                    </p>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
